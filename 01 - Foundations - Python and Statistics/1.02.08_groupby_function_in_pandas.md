
# 1.2.8 GroupBy Function in Pandas

## Context
This lesson explains how to use the `groupby()` function in Pandas for advanced data manipulation, aggregation, and transformation. It also covers applying custom functions and sorting data for better insights.

## Overview
The `groupby()` function enables grouping data based on unique values in one or more columns.  
It allows performing aggregate operations like mean, median, or sum on grouped data and supports applying custom functions for flexible analysis.

## Key Concepts
- **Grouping data** by one or more columns.
- **Aggregation** using built-in functions like `mean()`, `sum()`, `median()`.
- **Custom transformations** using `.apply()` and user-defined functions.
- **Sorting results** for clearer insights.

---

## Worked Examples

### [00:32] GroupBy Functions in Pandas
```python
df.groupby('Stock')['Price'].mean()
```
Example: Calculate the average stock price for each stock.

---

### [01:21] Mechanics of GroupBy Operations
Internally, Pandas:
1. Splits the data into groups based on the grouping column(s).
2. Applies a function (e.g., mean, median).
3. Combines results into a summary DataFrame.

```python
df.groupby('Stock')['Price'].median()
```

---

### [02:14] Grouping by Multiple Categories
You can group by **multiple columns** for multidimensional analysis.

```python
df.groupby(['Stock', 'Quarter'])['Price'].mean()
```
This provides insights across multiple dimensions (e.g., stock and time).

---

### [02:37] Creating and Using Custom Python Functions
Define a custom Python function and apply it to DataFrame elements.

```python
def increase_by_10(x):
    return x * 1.10
```

Custom functions help modularize complex logic.

---

### [04:06] Applying Functions to DataFrame Columns
Use `.apply()` to apply a custom function to each value in a column.

```python
df['Price'].apply(increase_by_10)
```
This enables row-wise transformation with user-defined logic.

---

### [06:05] Storing Transformed Data in New Columns
After transforming values, store the results in a new column:

```python
df['New_Price'] = df['Price'].apply(increase_by_10)
```
This keeps original data intact while allowing comparisons.

---

### [06:37] Sorting Data in Pandas
Use `sort_values()` to order rows by a column.

```python
df.sort_values('Price', ascending=False)
```
Sorting helps identify top or bottom values quickly.

---

## Formulas (plain text)
- Group by column: `df.groupby('Col')`
- Aggregate per group: `df.groupby('Col')['Val'].mean()`
- Group by multiple columns: `df.groupby(['Col1', 'Col2'])['Val'].sum()`
- Apply custom function: `df['Col'].apply(my_func)`
- Sort values: `df.sort_values('Col', ascending=True)`

---

## Summary
- `groupby()` enables efficient data aggregation and transformation.
- Use `.apply()` for custom logic and transformations.
- Combine grouping and sorting for clearer insights.
- Ideal for advanced data analysis and reporting.

---

## References
- [Pandas Documentation â€“ GroupBy](https://pandas.pydata.org/docs/reference/groupby.html)

---

### Private Video Reference

> Access: Use your own Azure credentials or a short-lived SAS.  
> We do not publish proprietary media in this repository.
